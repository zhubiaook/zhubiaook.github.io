---
layout: post
title: '逻辑卷的管理 LVM'
date: 2017-08-12
author: "zhubiao"
header-img: "img/post-bg-universe.jpg"
categories: Linux
tags: 磁盘管理
---

<!DOCTYPE html><html><head><title>LVM 逻辑卷管理</title><meta charset='utf-8'><link href='https://dn-maxiang.qbox.me/res-min/themes/marxico.css' rel='stylesheet'><style></style></head><body><div id='preview-contents' class='note-content'>
                        
                    



<h1 id="lvm-逻辑卷管理">LVM 逻辑卷管理</h1>

<blockquote>
  <p>想象一个场景，某天你管理的服务器硬盘空间不足了，该怎么处理。当然是加硬盘，但若系统不允许关机，服务不能停，如何添加硬盘。此时我们可以在早期规划的时候就创建逻辑卷。逻辑卷可以在不影响系统运行的情况下弹性的扩展、压缩硬盘空间。</p>
</blockquote>

<h2 id="逻辑卷组成">逻辑卷组成</h2>

<p>如下图所示，逻辑卷的逻辑结构图，PV（physical volume）组成卷组VG(volume group)，在卷组上可以创建逻辑卷LV(logical volume)。</p>

<p><img longdesc="./2017-08-12_162639.png" alt="Alt text" title="" type="image/png" src="data:image/png;base64,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" class="" width="300"></p>

<p><strong>PV (Physical Volume)</strong> <br>
PV 物理卷，就是硬盘或分区，和物理的硬盘有同样的功能，和普通硬盘的区别在于，它被标识为物理卷，有物理卷的管理参数，将来用它创建卷组用。</p>

<p><strong>VG (Volume Group)</strong> <br>
VG 卷组，将多个物理卷集合为一个大的逻辑硬盘，类似于没有LVM功能的硬盘，为创建逻辑卷提供硬盘空间，普通硬盘上面分配空间是通过block块进行分配，而卷组中是通过PE进行分配，PE是逻辑卷中空间分配的最小单位，默认值为4M。</p>

<p><strong>LV (Logical Volume)</strong> <br>
LV 逻辑卷，逻辑卷是在卷组的基础上将卷组分成不同大小的隔离空间，类似于非LVM中分区的概念。</p>

<p><code>逻辑卷的用途在于弹性的扩展，压缩磁盘空间。其并不具有容错能力和提高I/O性能的功能。</code></p>



<h2 id="实验">实验</h2>

<p><strong>一、 逻辑卷的创建</strong></p>

<p>逻辑卷的创建步骤如下</p>

<ul><li>创建物理卷</li>
<li>创建卷组</li>
<li>创建逻辑卷</li>
<li>创建文件系统</li>
<li>挂载文件系统</li>
</ul>

<p><strong>a. 准备实验环境</strong> <br>
本实验中使用分区来创建物理卷，实际生产环境中一般使用整块硬盘来创建物理卷，我们创建4个分区/dev/sdb1, /dev/sdb2, /dev/sdb3, /dev/sdb4, 先使用3g分区创建逻辑卷，留一个分区到后面做扩展逻辑卷使用。</p>

<p>创建分区, 并将分区类型调整为8e(Linux LVM)</p>

<pre class="prettyprint hljs-dark"><code class="hljs livescript"><span class="hljs-comment"># 使用fdisk分区</span><br>[root@zhubiaook ~]<span class="hljs-comment"># fdisk /dev/sdb</span><br>Device contains neither a valid DOS partition table, nor Sun, SGI <span class="hljs-keyword">or</span> OSF disklabel<br>Building a <span class="hljs-keyword">new</span> DOS disklabel <span class="hljs-keyword">with</span> disk identifier <span class="hljs-number">0xb0beda60</span>.<br>Changes will remain <span class="hljs-keyword">in</span> memory only, <span class="hljs-keyword">until</span> you decide <span class="hljs-keyword">to</span> write them.<br>After <span class="hljs-literal">that</span>, <span class="hljs-keyword">of</span> course, the previous content won<span class="hljs-string">'t be recoverable.<br><br>Warning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)<br><br>WARNING: DOS-compatible mode is deprecated. It'</span>s strongly recommended <span class="hljs-keyword">to</span><br>         <span class="hljs-keyword">switch</span> <span class="hljs-literal">off</span> the mode (command <span class="hljs-string">'c'</span>) <span class="hljs-keyword">and</span> change display units <span class="hljs-keyword">to</span><br>         sectors (command <span class="hljs-string">'u'</span>).<br><br>Command (m <span class="hljs-keyword">for</span> help): n<br>Command action<br>   e   extended<br>   p   primary partition (<span class="hljs-number">1</span>-<span class="hljs-number">4</span>)<br>p<br>Partition number (<span class="hljs-number">1</span>-<span class="hljs-number">4</span>): <span class="hljs-number">1</span><br>First cylinder (<span class="hljs-number">1</span>-<span class="hljs-number">2610</span>, <span class="hljs-keyword">default</span> <span class="hljs-number">1</span>): <br>Using <span class="hljs-keyword">default</span> value <span class="hljs-number">1</span><br>Last cylinder, +cylinders <span class="hljs-keyword">or</span> +size{K,M,G} (<span class="hljs-number">1</span>-<span class="hljs-number">2610</span>, <span class="hljs-keyword">default</span> <span class="hljs-number">2610</span>): +<span class="hljs-number">2</span>G<br><br>Command (m <span class="hljs-keyword">for</span> help): t<br>Selected partition <span class="hljs-number">1</span><br>Hex code (type L <span class="hljs-keyword">to</span> list codes): <span class="hljs-number">8e</span><br>Changed system type <span class="hljs-keyword">of</span> partition <span class="hljs-number">1</span> <span class="hljs-keyword">to</span> <span class="hljs-number">8e</span> (Linux LVM)<br><br>。。。<br><br>Command (m <span class="hljs-keyword">for</span> help): p<br><br>   Device Boot      Start         End      Blocks   Id  System<br>/dev/sdb1               <span class="hljs-number">1</span>         <span class="hljs-number">262</span>     <span class="hljs-number">2104483</span>+  <span class="hljs-number">8e</span>  Linux LVM<br>/dev/sdb2             <span class="hljs-number">263</span>         <span class="hljs-number">524</span>     <span class="hljs-number">2104515</span>   <span class="hljs-number">8e</span>  Linux LVM<br>/dev/sdb3             <span class="hljs-number">525</span>         <span class="hljs-number">917</span>     <span class="hljs-number">3156772</span>+  <span class="hljs-number">8e</span>  Linux LVM<br>/dev/sdb4             <span class="hljs-number">918</span>        <span class="hljs-number">1049</span>     <span class="hljs-number">1060290</span>   <span class="hljs-number">8e</span>  Linux LVM<br></code></pre>

<p>各分区大小如下所示</p>

<pre class="prettyprint hljs-dark"><code class="hljs tap">[root@zhubiaook ~]<span class="hljs-comment"># lsblk /dev/sdb</span><br>NAME   MAJ:MIN RM SIZE RO TYPE MOUNTPOINT<br>sdb      8:16  <span class="hljs-number"> 0 </span> 20G <span class="hljs-number"> 0 </span>disk <br>├─sdb1   8:17  <span class="hljs-number"> 0 </span>  2G <span class="hljs-number"> 0 </span>part <br>├─sdb2   8:18  <span class="hljs-number"> 0 </span>  2G <span class="hljs-number"> 0 </span>part <br>├─sdb3   8:19  <span class="hljs-number"> 0 </span>  3G <span class="hljs-number"> 0 </span>part <br>└─sdb4   8:20  <span class="hljs-number"> 0 </span>  1G <span class="hljs-number"> 0 </span>part <br></code></pre>

<p><strong>b. 创建物理卷</strong> <br>
前面已提到创建物理卷的目的在于标识物理硬盘为物理卷，能用物理卷的工具进行管理，为创建卷组做准备，物理卷的管理工具有：</p>

<ul><li><code>pvcreate DEVICE</code> 创建物理卷</li>
<li><code>pvdispaly DEVICE</code> 显示物理卷详细信息</li>
<li><code>pvs</code>  显示物理卷汇总信息</li>
<li><code>pvmove DEVICE</code>  将物理卷的数据移到其他物理卷</li>
<li><code>pvremove DEVICE</code> 移除物理卷</li>
</ul>

<p>创建物理卷</p>

<pre class="prettyprint hljs-dark"><code class="hljs dockerfile">[root@zhubiaook ~]<span class="hljs-comment"># pvcreate /dev/sdb{1,2,3}</span><br>  Physical <span class="hljs-keyword">volume</span><span class="bash"> <span class="hljs-string">"/dev/sdb1"</span> successfully created<br></span>  Physical <span class="hljs-keyword">volume</span><span class="bash"> <span class="hljs-string">"/dev/sdb2"</span> successfully created<br></span>  Physical <span class="hljs-keyword">volume</span><span class="bash"> <span class="hljs-string">"/dev/sdb3"</span> successfully created</span><br></code></pre>

<p>查看物理卷的信息</p>



<pre class="prettyprint hljs-dark"><code class="hljs irpf90"># 查看系统上所有物理卷<br>[root@zhubiaook ~]# pvs<br>  PV         VG   <span class="hljs-keyword">Fmt</span>  Attr PSize PFree<br>  /dev/sdb1       lvm2 ---- <span class="hljs-number">2.</span>1g <span class="hljs-number">2.</span>1g<br>  /dev/sdb2       lvm2 ---- <span class="hljs-number">2.</span>1g <span class="hljs-number">2.</span>1g<br>  /dev/sdb3       lvm2 ---- <span class="hljs-number">3.</span>1g <span class="hljs-number">3.</span>1g<br><br># 查看具体物理卷的详细信息<br>[root@zhubiaook ~]# pvdisplay /dev/sdb1<br>  <span class="hljs-string">"/dev/sdb1"</span> is a new physical volume of <span class="hljs-string">"2.01 GiB"</span><br>  --- NEW Physical volume ---<br>  PV <span class="hljs-keyword">Name</span>               /dev/sdb1<br>  VG <span class="hljs-keyword">Name</span>                             &lt;=还不属于任何卷组<br>  PV <span class="hljs-built_in">Size</span>               <span class="hljs-number">2.01</span> GiB<br>  <span class="hljs-keyword">Allocatable</span>           NO<br>  PE <span class="hljs-built_in">Size</span>               <span class="hljs-number">0</span>             &lt;=还未创建卷组，无PE大小<br>  Total PE              <span class="hljs-number">0</span><br>  <span class="hljs-keyword">Free</span> PE               <span class="hljs-number">0</span><br>  <span class="hljs-built_in">Allocated</span> PE          <span class="hljs-number">0</span><br>  PV UUID               TKMuv-u9uh-caXi-e277-ABNA-fmwl-WCiLFc<br></code></pre>

<p><strong>c. 创建卷组</strong> <br>
创建卷组的目的在于将逻辑卷组合成一个大的逻辑硬盘，为后面创建逻辑卷提供空间，提供空间的最小单位是PE，默认PE的大小为4M，可以自行指定其大小</p>

<p>管理卷组的常用工具</p>

<ul><li><code>vgcreate</code>  创建卷组</li>
<li><code>vgs</code>  查看卷组汇总信息</li>
<li><code>vgdisplay</code> 查看卷组详细信息</li>
<li><code>vgextend</code> 扩展卷组</li>
<li><code>vgreduce</code> 缩进卷组</li>
<li><code>vgremove</code> 从卷组中移除物理卷</li>
</ul>

<p>创建卷组</p>



<pre class="prettyprint hljs-dark"><code class="hljs lsl">[root@zhubiaook ~]# vgcreate vg0 -s <span class="hljs-number">8</span>M /dev/sdb{<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>}<br>  Volume group <span class="hljs-string">"vg0"</span> successfully created<br></code></pre>

<p>查看卷组信息</p>



<pre class="prettyprint hljs-dark"><code class="hljs lsl">#查看系统上所有卷组信息<br>[root@zhubiaook ~]# vgs<br>  VG   #PV #LV #SN Attr   VSize VFree<br>  vg0    <span class="hljs-number">3</span>   <span class="hljs-number">0</span>   <span class="hljs-number">0</span> wz--n- <span class="hljs-number">7.01</span>g <span class="hljs-number">7.01</span>g<br><br># 查看某卷组详细信息<br>[root@zhubiaook ~]# vgdisplay vg0<br>  --- Volume group ---<br>  VG Name               vg0<br>  System ID             <br>  Format                lvm2<br>  Metadata Areas        <span class="hljs-number">3</span><br>  Metadata Sequence No  <span class="hljs-number">1</span><br>  VG Access             read/write<br>  VG Status             resizable<br>  MAX LV                <span class="hljs-number">0</span><br>  Cur LV                <span class="hljs-number">0</span><br>  Open LV               <span class="hljs-number">0</span><br>  Max PV                <span class="hljs-number">0</span><br>  Cur PV                <span class="hljs-number">3</span><br>  Act PV                <span class="hljs-number">3</span><br>  VG Size               <span class="hljs-number">7.01</span> GiB<br>  PE Size               <span class="hljs-number">8.00</span> MiB  &lt;=PE大小，由-s选项指定<br>  Total PE              <span class="hljs-number">897</span>  &lt;=PE总数<br>  Alloc PE / Size       <span class="hljs-number">0</span> / <span class="hljs-number">0</span>   <br>  Free  PE / Size       <span class="hljs-number">897</span> / <span class="hljs-number">7.01</span> GiB  &lt;=还未使用的PE数量<br>  VG UUID               <span class="hljs-number">3</span>fgkZ7-exHA-xkYq-ZeW5-r59K<span class="hljs-number">-3</span>qhu-jfHaYk<br></code></pre>

<p>此时我们再次查看物理卷的信息，将会有卷组及PE的信息生成。</p>

<pre class="prettyprint hljs-dark"><code class="hljs irpf90">[root@zhubiaook ~]# pvdisplay /dev/sdb1<br>  --- Physical volume ---<br>  PV <span class="hljs-keyword">Name</span>               /dev/sdb1<br>  VG <span class="hljs-keyword">Name</span>               vg0         &lt;=所属的卷组<br>  PV <span class="hljs-built_in">Size</span>               <span class="hljs-number">2.01</span> GiB / not usable <span class="hljs-number">7.16</span> MiB  <br>  <span class="hljs-keyword">Allocatable</span>           yes <br>  PE <span class="hljs-built_in">Size</span>               <span class="hljs-number">8.00</span> MiB   &lt;=PE大小由卷组决定<br>  Total PE              <span class="hljs-number">256</span>        &lt;=该物理卷提供的PE的数量<br>  <span class="hljs-keyword">Free</span> PE               <span class="hljs-number">256</span><br>  <span class="hljs-built_in">Allocated</span> PE          <span class="hljs-number">0</span><br>  PV UUID               TKMuv-u9uh-caXi-e277-ABNA-fmwl-WCiLFc<br></code></pre>

<p><strong>d. 创建逻辑卷</strong> <br>
创建逻辑卷的过程类似于无LVM创建分区的过程，就是将卷组划分成不同大小的空间。 <br>
逻辑卷管理常用管理工具</p>

<ul><li><code>lvcreate</code>  创建逻辑卷或快照</li>
<li><code>lvs</code>  查看逻辑卷汇总信息</li>
<li><code>lvdisplay</code> 查看逻辑卷详细信息</li>
<li><code>lvextend</code> 扩展逻辑卷</li>
<li><code>lvreduce</code> 压缩逻辑卷</li>
</ul>

<p>创建逻辑卷</p>

<pre class="prettyprint hljs-dark"><code class="hljs dockerfile">[root@zhubiaook ~]<span class="hljs-comment"># lvcreate -n lv0 -L 2G vg0</span><br>  Logical <span class="hljs-keyword">volume</span><span class="bash"> <span class="hljs-string">"lv0"</span> created.<br></span>[root@zhubiaook ~]<span class="hljs-comment"># lvcreate -n lv1 -l 50%vg vg0</span><br>  Logical <span class="hljs-keyword">volume</span><span class="bash"> <span class="hljs-string">"lv1"</span> created.</span><br></code></pre>

<p>查看逻辑卷信息</p>



<pre class="prettyprint hljs-dark"><code class="hljs yaml"><span class="hljs-comment">#查看系统中所有逻辑卷汇总信息</span><br><span class="hljs-string">[root@zhubiaook</span> <span class="hljs-string">~]#</span> <span class="hljs-string">vgs</span><br>  <span class="hljs-string">VG</span>   <span class="hljs-comment">#PV #LV #SN Attr   VSize VFree</span><br>  <span class="hljs-string">vg0</span>    <span class="hljs-number">3</span>   <span class="hljs-number">2</span>   <span class="hljs-number">0</span> <span class="hljs-string">wz--n-</span> <span class="hljs-number">7.01</span><span class="hljs-string">g</span> <span class="hljs-number">1.51</span><span class="hljs-string">g</span><br><br><span class="hljs-comment">#查看逻辑卷详细信息</span><br><span class="hljs-string">[root@zhubiaook</span> <span class="hljs-string">~]#</span> <span class="hljs-string">lvdisplay</span> <br><span class="hljs-bullet">  -</span><span class="hljs-bullet">--</span> <span class="hljs-string">Logical</span> <span class="hljs-string">volume</span> <span class="hljs-meta">---</span><br>  <span class="hljs-string">LV</span> <span class="hljs-string">Path</span>                <span class="hljs-string">/dev/vg0/lv0</span><br>  <span class="hljs-string">LV</span> <span class="hljs-string">Name</span>                <span class="hljs-string">lv0</span><br>  <span class="hljs-string">VG</span> <span class="hljs-string">Name</span>                <span class="hljs-string">vg0</span><br>  <span class="hljs-string">LV</span> <span class="hljs-string">UUID</span>                <span class="hljs-number">9</span><span class="hljs-string">dBKzn-FnfG-nKt9-Jp6N-eire-fMf5-1gGniO</span><br>  <span class="hljs-string">LV</span> <span class="hljs-string">Write</span> <span class="hljs-string">Access</span>        <span class="hljs-string">read/write</span><br>  <span class="hljs-string">LV</span> <span class="hljs-string">Creation</span> <span class="hljs-string">host,</span> <span class="hljs-string">time</span> <span class="hljs-string">zhubiaook.github.io,</span> <span class="hljs-number">2017</span><span class="hljs-bullet">-08</span><span class="hljs-bullet">-10</span> <span class="hljs-number">22</span><span class="hljs-string">:45:46</span> <span class="hljs-string">+0800</span><br>  <span class="hljs-string">LV</span> <span class="hljs-string">Status</span>              <span class="hljs-string">available</span><br>  <span class="hljs-comment"># open                 0</span><br>  <span class="hljs-string">LV</span> <span class="hljs-string">Size</span>                <span class="hljs-number">2.00</span> <span class="hljs-string">GiB</span><br>  <span class="hljs-string">Current</span> <span class="hljs-string">LE</span>             <span class="hljs-number">256</span><br>  <span class="hljs-string">Segments</span>               <span class="hljs-number">1</span><br>  <span class="hljs-string">Allocation</span>             <span class="hljs-string">inherit</span><br>  <span class="hljs-string">Read</span> <span class="hljs-string">ahead</span> <span class="hljs-string">sectors</span>     <span class="hljs-string">auto</span><br><span class="hljs-bullet">  -</span> <span class="hljs-string">currently</span> <span class="hljs-string">set</span> <span class="hljs-string">to</span>     <span class="hljs-number">256</span><br>  <span class="hljs-string">Block</span> <span class="hljs-string">device</span>           <span class="hljs-number">253</span><span class="hljs-string">:0</span><br><br><span class="hljs-bullet">  -</span><span class="hljs-bullet">--</span> <span class="hljs-string">Logical</span> <span class="hljs-string">volume</span> <span class="hljs-meta">---</span><br>  <span class="hljs-string">LV</span> <span class="hljs-string">Path</span>                <span class="hljs-string">/dev/vg0/lv1</span><br>  <span class="hljs-string">LV</span> <span class="hljs-string">Name</span>                <span class="hljs-string">lv1</span><br>  <span class="hljs-string">VG</span> <span class="hljs-string">Name</span>                <span class="hljs-string">vg0</span><br>  <span class="hljs-string">LV</span> <span class="hljs-string">UUID</span>                <span class="hljs-string">T54Mwi-vEYi-lQKm-jr6n-pv0v-0kk0-VoF4em</span><br>  <span class="hljs-string">LV</span> <span class="hljs-string">Write</span> <span class="hljs-string">Access</span>        <span class="hljs-string">read/write</span><br>  <span class="hljs-string">LV</span> <span class="hljs-string">Creation</span> <span class="hljs-string">host,</span> <span class="hljs-string">time</span> <span class="hljs-string">zhubiaook.github.io,</span> <span class="hljs-number">2017</span><span class="hljs-bullet">-08</span><span class="hljs-bullet">-10</span> <span class="hljs-number">22</span><span class="hljs-string">:46:21</span> <span class="hljs-string">+0800</span><br>  <span class="hljs-string">LV</span> <span class="hljs-string">Status</span>              <span class="hljs-string">available</span><br>  <span class="hljs-comment"># open                 0</span><br>  <span class="hljs-string">LV</span> <span class="hljs-string">Size</span>                <span class="hljs-number">3.50</span> <span class="hljs-string">GiB</span><br>  <span class="hljs-string">Current</span> <span class="hljs-string">LE</span>             <span class="hljs-number">448</span><br>  <span class="hljs-string">Segments</span>               <span class="hljs-number">2</span><br>  <span class="hljs-string">Allocation</span>             <span class="hljs-string">inherit</span><br>  <span class="hljs-string">Read</span> <span class="hljs-string">ahead</span> <span class="hljs-string">sectors</span>     <span class="hljs-string">auto</span><br><span class="hljs-bullet">  -</span> <span class="hljs-string">currently</span> <span class="hljs-string">set</span> <span class="hljs-string">to</span>     <span class="hljs-number">256</span><br>  <span class="hljs-string">Block</span> <span class="hljs-string">device</span>           <span class="hljs-number">253</span><span class="hljs-string">:1</span><br></code></pre>

<p>查看逻辑卷的设备文件 <br>
逻辑卷创建好后会在系统上生成相应的设备文件,和两个符号链接文件指向该设备文件</p>

<ul><li>/dev/dm-#  </li>
<li>/dev/VG_NAME/LV_NAME</li>
<li>/dev/mapper/VG_NAME-LV_NAME</li>
</ul>

<pre class="prettyprint hljs-dark"><code class="hljs tap">[root@zhubiaook ~]<span class="hljs-comment"># ll /dev/vg0/</span><br>total 0<br>lrwxrwxrwx.<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 7 </span>Aug<span class="hljs-number"> 10 </span>22:45 lv0 -&gt; ../dm-0<br>lrwxrwxrwx.<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 7 </span>Aug<span class="hljs-number"> 10 </span>22:46 lv1 -&gt; ../dm-1<br>[root@zhubiaook ~]<span class="hljs-comment"># ll /dev/mapper/</span><br>total 0<br>crw-rw----.<span class="hljs-number"> 1 </span>root root 10,<span class="hljs-number"> 58 </span>Aug<span class="hljs-number"> 10 </span>20:54 control<br>lrwxrwxrwx.<span class="hljs-number"> 1 </span>root root     <span class="hljs-number"> 7 </span>Aug<span class="hljs-number"> 10 </span>22:45 vg0-lv0 -&gt; ../dm-0<br>lrwxrwxrwx.<span class="hljs-number"> 1 </span>root root     <span class="hljs-number"> 7 </span>Aug<span class="hljs-number"> 10 </span>22:46 vg0-lv1 -&gt; ../dm-1<br></code></pre>

<p><strong>e. 创建文件系统</strong> <br>
逻辑卷创建好以后也需要创建文件系统后，才能挂载使用，我们下面演示将vg0-lv1创建为ext4文件系统，vg1-lv2创建xfs文件系统</p>



<pre class="prettyprint hljs-dark"><code class="hljs autoit"><span class="hljs-meta">#创建ext4文件系统</span><br>[root<span class="hljs-symbol">@zhubiaook</span> ~]<span class="hljs-meta"># mkfs.ext4 /dev/vg0/lv0</span><br><br><span class="hljs-meta">#创建xfs文件系统</span><br>[root<span class="hljs-symbol">@zhubiaook</span> ~]<span class="hljs-meta"># mkfs.xfs /dev/vg0/lv1 </span><br><br><span class="hljs-meta">#查看创建好的文件系统</span><br>[root<span class="hljs-symbol">@zhubiaook</span> ~]<span class="hljs-meta"># blkid  | grep vg0</span><br>/dev/mapper/vg0-lv0: UUID=<span class="hljs-string">"bb4fbc4e-8074-430c-9fc3-bc15488304e5"</span> TYPE=<span class="hljs-string">"ext4"</span> <br>/dev/mapper/vg0-lv1: UUID=<span class="hljs-string">"629f5f4d-7a36-46d0-a14e-7d7c0d37e8a4"</span> TYPE=<span class="hljs-string">"xfs"</span> <br></code></pre>

<p><strong>f. 挂载逻辑卷文件系统</strong></p>

<pre class="prettyprint hljs-dark"><code class="hljs elixir"><span class="hljs-comment"># 创建挂载点</span><br>[root<span class="hljs-variable">@zhubiaook</span> ~]<span class="hljs-comment"># mkdir /mnt/lv0</span><br>[root<span class="hljs-variable">@zhubiaook</span> ~]<span class="hljs-comment"># mkdir /mnt/lv1</span><br><br><span class="hljs-comment"># 挂载文件系统</span><br>[root<span class="hljs-variable">@zhubiaook</span> ~]<span class="hljs-comment"># mount /dev/vg0/lv0 /mnt/lv0</span><br>[root<span class="hljs-variable">@zhubiaook</span> ~]<span class="hljs-comment"># mount /dev/vg0/lv1 /mnt/lv1</span><br>[root<span class="hljs-variable">@zhubiaook</span> ~]<span class="hljs-comment"># df -Th | grep vg0</span><br>/dev/mapper/vg<span class="hljs-number">0</span>-lv<span class="hljs-number">0</span> ext4   <span class="hljs-number">2.0</span>G  <span class="hljs-number">3.0</span>M  <span class="hljs-number">1.9</span>G   <span class="hljs-number">1</span>% <span class="hljs-regexp">/mnt/lv</span><span class="hljs-number">0</span><br>/dev/mapper/vg<span class="hljs-number">0</span>-lv1 xfs    <span class="hljs-number">3.5</span>G   <span class="hljs-number">33</span>M  <span class="hljs-number">3.5</span>G   <span class="hljs-number">1</span>% <span class="hljs-regexp">/mnt/lv</span>1<br></code></pre>

<hr>

<p><strong>二、 扩展逻辑卷</strong> <br>
逻辑卷的扩展步骤如下</p>

<ul><li>创建物理卷</li>
<li>扩展卷组</li>
<li>扩展逻辑卷</li>
<li>扩展文件系统</li>
</ul>

<p>当磁盘空间不足，此时就是LVM文件系统大展身手的时候，硬盘的扩展对于LVM是非常容易的，下面我们演示将一个新的分区加入加入逻辑卷</p>

<p>本实验在上一个实验的基础上进行</p>

<p><strong>a. 创建物理卷 /dev/sdb4</strong></p>



<pre class="prettyprint hljs-dark"><code class="hljs gcode"><span class="hljs-attr">#创建<br>[root@zhubiaook ~]# pvcreate /dev/sdb4</span><br>  Physical volume <span class="hljs-string">"/dev/sdb4"</span> successfully created<br><br><span class="hljs-attr">#创建后<br>[root@zhubiaook ~]# pvs<br>  PV         VG   Fmt  Attr PSize PFree<br>  /dev/sdb1</span>  v<span class="hljs-name">g0</span>  lv<span class="hljs-name">m2</span> a--u <span class="hljs-number">2.00</span>g    <span class="hljs-number">0</span> <br>  /dev/sdb<span class="hljs-number">2</span>  v<span class="hljs-name">g0</span>  lv<span class="hljs-name">m2</span> a--u <span class="hljs-number">2.00</span>g <span class="hljs-number">1.51</span>g<br>  /dev/sdb<span class="hljs-number">3</span>  v<span class="hljs-name">g0</span>  lv<span class="hljs-name">m2</span> a--u <span class="hljs-number">3.01</span>g    <span class="hljs-number">0</span> <br>  /dev/sdb<span class="hljs-number">4</span>       lv<span class="hljs-name">m2</span> ---- <span class="hljs-number">1.01</span>g <span class="hljs-number">1.01</span>g<br></code></pre>

<p><strong>b. 将物理卷sdb4加入卷组vg0</strong></p>

<pre class="prettyprint hljs-dark"><code class="hljs crmsh">[root@zhubiaook ~]<span class="hljs-comment"># vgextend vg0 /dev/sdb4 </span><br>  Volume <span class="hljs-keyword">group</span> <span class="hljs-title">"vg0</span><span class="hljs-string">" successfully extended</span><br></code></pre>

<p><strong>c. 扩展逻辑卷</strong> <br>
将lv0从2G扩展到3G，lv1从3.5G扩展到4G</p>

<pre class="prettyprint hljs-dark"><code class="hljs dockerfile"><span class="hljs-comment"># 扩展 lv0                                               </span><br>[root@zhubiaook ~]<span class="hljs-comment"># lvextend -L +1G /dev/vg0/lv0 </span><br>  Size of logical <span class="hljs-keyword">volume</span><span class="bash"> vg0/lv0 changed from 2.00 GiB (256 extents) to 3.00 GiB (384 extents).<br></span>  Logical <span class="hljs-keyword">volume</span><span class="bash"> lv0 successfully resized.<br></span><br><span class="hljs-comment"># 扩展 lv1</span><br>[root@zhubiaook ~]<span class="hljs-comment"># lvextend -L +500M /dev/vg0/lv1</span><br>  Rounding size to boundary between physical extents: <span class="hljs-number">504.00</span> MiB.<br>  Size of logical <span class="hljs-keyword">volume</span><span class="bash"> vg0/lv1 changed from 3.50 GiB (448 extents) to 3.99 GiB (511 extents).<br></span>  Logical <span class="hljs-keyword">volume</span><span class="bash"> lv1 successfully resized.</span><br></code></pre>

<p><strong>d. 扩展文件系统</strong> <br>
我们已将物理卷扩展到3G，但此时查看文件系统的大小仍然是2G，这是因为扩展了的空间仍然没有文件系统，我们需要在这些区域上创建文件系统。</p>

<p>lv0 （ext4）文件系统扩展</p>

<pre class="prettyprint hljs-dark"><code class="hljs applescript"><span class="hljs-comment"># 仍然只有2G的空间</span><br>[root@zhubiaook ~]<span class="hljs-comment"># df -Th /dev/vg0/lv0</span><br>Filesystem          Type  Size  Used Avail Use% Mounted <span class="hljs-keyword">on</span><br>/dev/mapper/vg0-lv0 ext4  <span class="hljs-number">2.0</span>G  <span class="hljs-number">3.0</span>M  <span class="hljs-number">1.9</span>G   <span class="hljs-number">1</span>% /mnt/lv0<br><br><span class="hljs-comment"># 将文件系统扩展到3G</span><br>[root@zhubiaook ~]<span class="hljs-comment"># resize2fs /dev/vg0/lv0 3G</span><br>resize2fs <span class="hljs-number">1.41</span><span class="hljs-number">.12</span> (<span class="hljs-number">17</span>-May<span class="hljs-number">-2010</span>)<br>Filesystem <span class="hljs-keyword">at</span> /dev/vg0/lv0 <span class="hljs-keyword">is</span> mounted <span class="hljs-keyword">on</span> /mnt/lv0; <span class="hljs-keyword">on</span>-line resizing required<br>old desc_blocks = <span class="hljs-number">1</span>, new_desc_blocks = <span class="hljs-number">1</span><br>Performing an <span class="hljs-keyword">on</span>-line resize <span class="hljs-keyword">of</span> /dev/vg0/lv0 <span class="hljs-keyword">to</span> <span class="hljs-number">786432</span> (<span class="hljs-number">4</span>k) blocks.<br>The filesystem <span class="hljs-keyword">on</span> /dev/vg0/lv0 <span class="hljs-keyword">is</span> now <span class="hljs-number">786432</span> blocks long.<br><br><span class="hljs-comment">#查看空间已经扩展到3G</span><br>[root@zhubiaook ~]<span class="hljs-comment"># df -Th /dev/vg0/lv0</span><br>Filesystem          Type  Size  Used Avail Use% Mounted <span class="hljs-keyword">on</span><br>/dev/mapper/vg0-lv0 ext4  <span class="hljs-number">2.9</span>G  <span class="hljs-number">3.0</span>M  <span class="hljs-number">2.8</span>G   <span class="hljs-number">1</span>% /mnt/lv0<br></code></pre>

<p>lv1(xfs) 文件系统扩展</p>



<pre class="prettyprint hljs-dark"><code class="hljs coffeescript">[root@zhubiaook ~]<span class="hljs-comment"># xfs_growfs /mnt/lv1/</span><br><br>[root@zhubiaook ~]<span class="hljs-comment"># df -Th /dev/vg0/lv1</span><br>Filesystem          Type  Size  Used Avail Use% Mounted <span class="hljs-literal">on</span><br>/dev/mapper/vg0-lv1 xfs   <span class="hljs-number">4.0</span>G   <span class="hljs-number">33</span>M  <span class="hljs-number">4.0</span>G   <span class="hljs-number">1</span>% /mnt/lv1<br></code></pre>

<p><strong>e. 控制逻辑卷和文件系统可以一步就完成</strong></p>

<pre class="prettyprint hljs-dark"><code class="hljs coffeescript"><span class="hljs-comment"># -r 选项自动完成逻辑卷和文件系统的扩展</span><br>[root@zhubiaook ~]<span class="hljs-comment"># lvextend -L +500M -r /dev/vg0/lv0 </span><br><br>[root@zhubiaook ~]<span class="hljs-comment"># df -Th /dev/vg0/lv0</span><br>Filesystem          Type  Size  Used Avail Use% Mounted <span class="hljs-literal">on</span><br>/dev/mapper/vg0-lv0 ext4  <span class="hljs-number">3.4</span>G  <span class="hljs-number">4.0</span>M  <span class="hljs-number">3.2</span>G   <span class="hljs-number">1</span>% /mnt/lv0<br></code></pre>

<hr>

<p><strong>三、 压缩逻辑卷</strong> <br>
逻辑卷的压缩步骤如下</p>

<ul><li>卸载文件系统</li>
<li>压缩文件系统</li>
<li>压缩逻辑卷</li>
<li>将要移走的物理卷中的数据移到其他物理卷中</li>
<li>从卷组中将物理卷移走</li>
<li>删除物理卷</li>
</ul>

<p>压缩逻辑卷是一种比较危险的操作，有可能会导致数据的丢失，所以非必须，尽量不要压缩逻辑卷，在压缩逻辑卷前，我们必须进行文件系统的检测，压缩后的空间必须能存储现有数据，对于。</p>

<p><strong>a. 卸载文件系统</strong></p>



<pre class="prettyprint hljs-dark"><code class="hljs autoit">[root<span class="hljs-symbol">@zhubiaook</span> ~]<span class="hljs-meta"># umount /mnt/lv{0,1}</span><br></code></pre>

<p><strong>强制检测文件系统</strong></p>



<pre class="prettyprint hljs-dark"><code class="hljs crmsh">[root@zhubiaook ~]<span class="hljs-comment"># fsck -f /dev/vg0/lv0</span><br>fsck from util-linux-ng <span class="hljs-number">2.17</span>.<span class="hljs-number">2</span><br>e2fsck <span class="hljs-number">1.41</span>.<span class="hljs-number">12</span> (<span class="hljs-number">17</span>-May-<span class="hljs-number">2010</span>)<br>Pass <span class="hljs-number">1</span>: Checking inodes, blocks, <span class="hljs-keyword">and</span> sizes<br>Pass <span class="hljs-number">2</span>: Checking directory structure<br>Pass <span class="hljs-number">3</span>: Checking directory connectivity<br>Pass <span class="hljs-number">4</span>: Checking <span class="hljs-keyword">reference</span> counts<br>Pass <span class="hljs-number">5</span>: Checking <span class="hljs-keyword">group</span> <span class="hljs-title">summary</span> <span class="hljs-literal">inf</span>ormation<br>/dev/mapper/vg0-lv0: <span class="hljs-number">11</span>/<span class="hljs-number">229376</span> files (<span class="hljs-number">0.0</span>% non-contiguous), <span class="hljs-number">31814</span>/<span class="hljs-number">915456</span> blocks<br></code></pre>

<p><strong>c. 缩减文件系统的大小</strong> <br>
我们将文件系统lv0的大小缩减到1G，因为只有ext4的文件系统能够缩减，xfs的只能扩展，不能缩减。</p>



<pre class="prettyprint hljs-dark"><code class="hljs lsl">[root@zhubiaook ~]# resize2fs /dev/vg0/lv0 <span class="hljs-number">1</span>G<br>resize2fs <span class="hljs-number">1.41</span><span class="hljs-number">.12</span> (<span class="hljs-number">17</span>-May<span class="hljs-number">-2010</span>)<br>Resizing the filesystem on /dev/vg0/lv0 to <span class="hljs-number">262144</span> (<span class="hljs-number">4</span>k) blocks.<br>The filesystem on /dev/vg0/lv0 is now <span class="hljs-number">262144</span> blocks long.<br></code></pre>

<p><strong>d. 缩减逻辑卷的大小</strong></p>



<pre class="prettyprint hljs-dark"><code class="hljs dockerfile">[root@zhubiaook ~]<span class="hljs-comment"># lvreduce -L 1G /dev/vg0/lv0 </span><br>  WARNING: Reducing active logical <span class="hljs-keyword">volume</span><span class="bash"> to 1.00 GiB.<br></span>  THIS MAY DESTROY YOUR DATA (filesystem etc.)<br>Do you really want to reduce vg0/lv0? [y/n]: y<br>  Size of logical <span class="hljs-keyword">volume</span><span class="bash"> vg0/lv0 changed from 3.49 GiB (447 extents) to 1.00 GiB (128 extents).<br></span>  Logical <span class="hljs-keyword">volume</span><span class="bash"> lv0 successfully resized.</span><br></code></pre>

<p><strong>e.  将要移走的物理卷中的数据移动到其它物理卷</strong> <br>
在移走之前，我们首先要查看卷组中的Free PE数量是否大于所要移走物理卷的Total PE，因为移走物理卷的过程就是将物理卷中的PE移到其它物理卷。</p>

<pre class="prettyprint hljs-dark"><code class="hljs elixir"><span class="hljs-comment">#查看空间是否足够</span><br>[root<span class="hljs-variable">@zhubiaook</span> ~]<span class="hljs-comment"># vgdisplay vg0 | grep Free</span><br>  Free  PE / Size       <span class="hljs-number">387</span> / <span class="hljs-number">3.02</span> GiB    &lt;=有<span class="hljs-number">387</span>个空闲的PE<br>[root<span class="hljs-variable">@zhubiaook</span> ~]<span class="hljs-comment"># pvdisplay /dev/sdb4 | grep Total</span><br>  Total PE              <span class="hljs-number">129</span>              &lt;=要移走<span class="hljs-number">129</span>个PE，空间足够<br><br><span class="hljs-comment">#将PE移走</span><br>[root<span class="hljs-variable">@zhubiaook</span> ~]<span class="hljs-comment"># pvmove /dev/sdb4</span><br>  /dev/<span class="hljs-symbol">sdb4:</span> <span class="hljs-symbol">Moved:</span> <span class="hljs-number">1.6</span>%<br>  <span class="hljs-regexp">/dev/sdb</span>4: <span class="hljs-symbol">Moved:</span> <span class="hljs-number">100.0</span>%<br></code></pre>

<p><strong>f. 从卷组vg0中将物理卷sdb4移除</strong></p>

<pre class="prettyprint hljs-dark"><code class="hljs irpf90">#确认sdb4的PE是否未被使用<br>[root@zhubiaook ~]# pvdisplay /dev/sdb4<br>  --- Physical volume ---<br>  PV <span class="hljs-keyword">Name</span>               /dev/sdb4<br>  VG <span class="hljs-keyword">Name</span>               vg0<br>  PV <span class="hljs-built_in">Size</span>               <span class="hljs-number">1.01</span> GiB / not usable <span class="hljs-number">3.44</span> MiB<br>  <span class="hljs-keyword">Allocatable</span>           yes <br>  PE <span class="hljs-built_in">Size</span>               <span class="hljs-number">8.00</span> MiB<br>  Total PE              <span class="hljs-number">129</span><br>  <span class="hljs-keyword">Free</span> PE               <span class="hljs-number">129</span><br>  <span class="hljs-built_in">Allocated</span> PE          <span class="hljs-number">0</span><br>  PV UUID               mkAvSe-Xnkn-c2k0-VOcN-rHUN-kM9-MdPsJX<br><br>#移除sdb4从卷组vg0中<br>[root@zhubiaook ~]# vgreduce vg0 /dev/sdb4<br>  Removed <span class="hljs-string">"/dev/sdb4"</span> from volume group <span class="hljs-string">"vg0"</span><br></code></pre>

<p><strong>g. 将/dev/sdb4从物理卷中移除</strong></p>



<pre class="prettyprint hljs-dark"><code class="hljs applescript">[root@zhubiaook ~]<span class="hljs-comment"># pvremove /dev/sdb4</span><br>  Labels <span class="hljs-keyword">on</span> physical volume <span class="hljs-string">"/dev/sdb4"</span> successfully wiped<br></code></pre>

<hr>

<p><strong>四、 迁移逻辑卷</strong> <br>
迁移卷组的步骤</p>

<ul><li>卸载旧系统中的逻辑卷文件系统</li>
<li>将卷组设置为非活动状态</li>
<li>将卷组导出</li>
<li>将旧系统的硬盘移到新系统中</li>
<li>新系统中导入卷组</li>
<li>新系统中激活卷组</li>
<li>新系统中挂载逻辑卷文件系统</li>
</ul>

<p>有时因业务需要，需将逻辑卷从旧系统中移到新系统</p>

<p><strong>a. 将所有逻辑卷从卷组中卸载</strong></p>

<p><strong>b. 重命名卷组</strong> <br>
为了避免旧系统中的卷组与旧系统中的卷组重名，我们可以将卷组重命名，当然逻辑卷也可以重命名</p>

<pre class="prettyprint hljs-dark"><code class="hljs autoit">[root<span class="hljs-symbol">@zhubiaook</span> ~]<span class="hljs-meta"># vgrename vg0 newvg</span><br>  Volume group <span class="hljs-string">"vg0"</span> successfully renamed <span class="hljs-keyword">to</span> <span class="hljs-string">"newvg"</span><br></code></pre>

<p><strong>c. 将卷组设为非活动状态</strong></p>

<pre class="prettyprint hljs-dark"><code class="hljs autoit">[root<span class="hljs-symbol">@zhubiaook</span> ~]<span class="hljs-meta"># vgchange -a n newvg</span><br>  <span class="hljs-number">0</span> logical volume(s) <span class="hljs-keyword">in</span> volume group <span class="hljs-string">"newvg"</span> now active<br><br><span class="hljs-meta">#确认是否非活动</span><br>[root<span class="hljs-symbol">@zhubiaook</span> ~]<span class="hljs-meta"># lvdisplay | grep <span class="hljs-string">"LV Status"</span></span><br>  LV Status              <span class="hljs-literal">NOT</span> available<br>  LV Status              <span class="hljs-literal">NOT</span> available<br></code></pre>

<p><strong>d. 将卷组导出</strong></p>



<pre class="prettyprint hljs-dark"><code class="hljs crmsh">[root@zhubiaook ~]<span class="hljs-comment"># vgexport newvg</span><br>  Volume <span class="hljs-keyword">group</span> <span class="hljs-title">"newvg</span><span class="hljs-string">" successfully exported</span><br></code></pre>

<p><strong>f. 硬盘移到新文件系统中</strong> <br>
此时就可以将硬盘拆下来移到新系统中，现在我将硬盘从新添加到另外一个系统中，继续实验</p>

<p><strong>g. 将卷组导入新系统</strong> <br>
开机检查硬盘在新系统中是否被识别，然后再导入卷组</p>



<pre class="prettyprint hljs-dark"><code class="hljs tap"><span class="hljs-comment"># 硬盘已被新系统识别</span><br>[root@z10 ~]<span class="hljs-comment"># lsblk /dev/sdb</span><br>NAME   MAJ:MIN RM SIZE RO TYPE MOUNTPOINT<br>sdb      8:16  <span class="hljs-number"> 0 </span> 20G <span class="hljs-number"> 0 </span>disk <br>©À©¤sdb1   8:17  <span class="hljs-number"> 0 </span>  2G <span class="hljs-number"> 0 </span>part <br>©À©¤sdb2   8:18  <span class="hljs-number"> 0 </span>  2G <span class="hljs-number"> 0 </span>part <br>©À©¤sdb3   8:19  <span class="hljs-number"> 0 </span>  3G <span class="hljs-number"> 0 </span>part <br>©¸©¤sdb4   8:20  <span class="hljs-number"> 0 </span>  1G <span class="hljs-number"> 0 </span>part <br><br><span class="hljs-comment">#将卷组导入</span><br>[root@z10 ~]<span class="hljs-comment"># vgimport newvg</span><br>  Volume group "newvg" successfully imported<br></code></pre>

<p><strong>h. 新系统中激活卷组</strong></p>



<pre class="prettyprint hljs-dark"><code class="hljs dockerfile"><span class="hljs-comment"># 激活卷组</span><br>[root@z10 ~]<span class="hljs-comment"># vgchange -a y newvg</span><br>  <span class="hljs-number">2</span> logical <span class="hljs-keyword">volume</span><span class="bash">(s) <span class="hljs-keyword">in</span> volume group <span class="hljs-string">"newvg"</span> now active<br></span><br><span class="hljs-comment">#却认是否被激活</span><br>[root@z10 ~]<span class="hljs-comment"># lvdisplay | grep "LV Status"</span><br>  LV Status              available<br>  LV Status              available<br></code></pre>

<p><strong>i. 挂载文件系统</strong></p>



<pre class="prettyprint hljs-dark"><code class="hljs dts"><span class="hljs-meta"># 确认设备文件存在</span><br>[root@z10 ~]<span class="hljs-meta"># ll /dev/newvg/</span><br>total <span class="hljs-number">0</span><br>lrwxrwxrwx. <span class="hljs-number">1</span> root root <span class="hljs-number">7</span> Aug <span class="hljs-number">12</span> <span class="hljs-number">20</span>:<span class="hljs-number">09</span> lv0 -&gt; ../dm<span class="hljs-number">-0</span><br>lrwxrwxrwx. <span class="hljs-number">1</span> root root <span class="hljs-number">7</span> Aug <span class="hljs-number">12</span> <span class="hljs-number">20</span>:<span class="hljs-number">09</span> lv1 -&gt; ../dm<span class="hljs-number">-1</span><br><br><span class="hljs-meta"># 创建挂载点</span><br>[root@z10 ~]<span class="hljs-meta"># mkdir /mnt/{lv0,lv1}</span><br><br><span class="hljs-meta"># 挂载文件系统</span><br>[root@z10 ~]<span class="hljs-meta"># mount /dev/newvg/lv0 /mnt/lv0/</span><br>[root@z10 ~]<span class="hljs-meta"># mount /dev/newvg/lv1 /mnt/lv1/</span><br><br><span class="hljs-meta"># 查看文件系统</span><br>[root@z10 ~]<span class="hljs-meta"># df -Th</span><br>Filesystem           Type     Size  Used Avail Use% Mounted on<br><span class="hljs-meta-keyword">/dev/</span>sda2            ext4      <span class="hljs-number">48</span>G   <span class="hljs-number">12</span>G   <span class="hljs-number">34</span>G  <span class="hljs-number">27</span>% /<br>tmpfs                tmpfs    <span class="hljs-number">491</span>M   <span class="hljs-number">76</span>K  <span class="hljs-number">491</span>M   <span class="hljs-number">1</span>% <span class="hljs-meta-keyword">/dev/</span>shm<br><span class="hljs-meta-keyword">/dev/</span>sda3            ext4      <span class="hljs-number">39</span>G   <span class="hljs-number">74</span>M   <span class="hljs-number">37</span>G   <span class="hljs-number">1</span>% /app<br><span class="hljs-meta-keyword">/dev/</span>sda1            ext4     <span class="hljs-number">976</span>M   <span class="hljs-number">35</span>M  <span class="hljs-number">891</span>M   <span class="hljs-number">4</span>% /boot<br><span class="hljs-meta-keyword">/dev/</span>sr0             iso9660  <span class="hljs-number">7.8</span>G  <span class="hljs-number">7.8</span>G     <span class="hljs-number">0</span> <span class="hljs-number">100</span>% <span class="hljs-meta-keyword">/media/</span>CentOS <span class="hljs-number">7</span> x86_64<br><span class="hljs-meta-keyword">/dev/</span>mapper/newvg-lv0<br>                     ext4     <span class="hljs-number">944</span>M  <span class="hljs-number">2.6</span>M  <span class="hljs-number">891</span>M   <span class="hljs-number">1</span>% <span class="hljs-meta-keyword">/mnt/</span>lv0<br><span class="hljs-meta-keyword">/dev/</span>mapper/newvg-lv1<br>                     xfs      <span class="hljs-number">4.0</span>G   <span class="hljs-number">33</span>M  <span class="hljs-number">4.0</span>G   <span class="hljs-number">1</span>% <span class="hljs-meta-keyword">/mnt/</span>lv1<br></code></pre>

<hr>

<p><strong>五、逻辑卷快照</strong> <br>
逻辑卷演示步骤</p>

<ul><li>创建快照</li>
<li>挂载快照</li>
<li>恢复快照</li>
<li>删除快照</li>
</ul>

<p>逻辑卷快照是一种快速备份数据的方式，按照以前的认知，数据量大的时候，备份数据是相对缓慢的。而逻辑卷却能在瞬间完成，这是为什么呢。其实当我们创建快照的时候，并为真正的将数据备份到快照中，而是快照和原逻辑卷做了一个关联。记录下做快照的那一时刻，只有当逻辑卷中的数据发生变化的时候，快照卷会将变化前的数据备份到自己的空间中。从而实现保存做快照卷那一时刻的数据。</p>

<p><strong>a. 创建快照卷</strong> <br>
创建快照前，先在原卷中准一些数据做测试。我们为lv0创建快照卷，现在其分区中创建几个文件。</p>

<pre class="prettyprint hljs-dark"><code class="hljs autoit">创建两个文件passwd和hell0.txt<br>[root<span class="hljs-symbol">@z10</span> lv0]<span class="hljs-meta"># pwd</span><br>/mnt/lv0<br>[root<span class="hljs-symbol">@z10</span> lv0]<span class="hljs-meta"># cp /etc/passwd ./</span><br><br>[root<span class="hljs-symbol">@z10</span> lv0]<span class="hljs-meta"># echo -e <span class="hljs-string">"Hello everyone\nI'm zhubiao"</span> &gt; hello.txt</span><br>[root<span class="hljs-symbol">@z10</span> lv0]<span class="hljs-meta"># ls</span><br>hello.txt  passwd<br></code></pre>

<pre class="prettyprint hljs-dark"><code class="hljs stata">-<span class="hljs-keyword">L</span> 快照卷大小<br>-<span class="hljs-keyword">n</span> 快照卷名字<br>-s 创建快照卷<br>-p 权限<br>[root@z10 ~]# lvcreate -<span class="hljs-keyword">L</span> 1G -<span class="hljs-keyword">n</span> snap_lv0 -s -p r /dev/newvg/lv0 <br>  Logical volume <span class="hljs-string">"snap_lv0"</span> created.<br><br># 查看快照卷和原逻辑卷直接的关联<br>[root@z10 ~]# lvdisplay /dev/newvg/{lv0,snap_lv0} <br>  --- Logical volume ---<br>  <span class="hljs-keyword">LV</span> Path                /dev/newvg/lv0<br>  <span class="hljs-keyword">LV</span> Name                lv0<br>  VG Name                newvg<br>  <span class="hljs-keyword">LV</span> UUID                9dBKzn-FnfG-nKt9-Jp6N-eire-fMf5-1gGniO<br>  <span class="hljs-keyword">LV</span> Write Access        <span class="hljs-keyword">read</span>/write<br>  <span class="hljs-keyword">LV</span> Creation host, time zhubiaook.github.io, 2017-08-10 22:45:46 +0800<br>  <span class="hljs-keyword">LV</span> snapshot status     source of<br>                         snap_lv0 [active]  &lt;=已有快照卷<br>  <span class="hljs-keyword">LV</span> Status              available<br>  # <span class="hljs-keyword">open</span>                 1<br>  <span class="hljs-keyword">LV</span> Size                1.00 GiB<br>  Current LE             128<br>  Segments               1<br>  Allocation             inherit<br>  <span class="hljs-keyword">Read</span> ahead sectors     auto<br>  - currently <span class="hljs-keyword">set</span> to     256<br>  Block device           253:0<br><br>  --- Logical volume ---<br>  <span class="hljs-keyword">LV</span> Path                /dev/newvg/snap_lv0<br>  <span class="hljs-keyword">LV</span> Name                snap_lv0<br>  VG Name                newvg<br>  <span class="hljs-keyword">LV</span> UUID                ao844K-hJHK-W0yH-mRho-rGe1-3EjR-AFcC4V<br>  <span class="hljs-keyword">LV</span> Write Access        <span class="hljs-keyword">read</span> only<br>  <span class="hljs-keyword">LV</span> Creation host, time z10.zhubiao.science, 2017-08-12 20:26:28 +0800<br>  <span class="hljs-keyword">LV</span> snapshot status     active destination <span class="hljs-keyword">for</span> lv0  &lt;=为谁创建了快照卷<br>  <span class="hljs-keyword">LV</span> Status              available<br>  # <span class="hljs-keyword">open</span>                 0<br>  <span class="hljs-keyword">LV</span> Size                1.00 GiB<br>  Current LE             128<br>  COW-<span class="hljs-keyword">table</span> size         1.00 GiB<br>  COW-<span class="hljs-keyword">table</span> LE           128<br>  Allocated to snapshot  0.00%<br>  Snapshot chunk size    4.00 KiB<br>  Segments               1<br>  Allocation             inherit<br>  <span class="hljs-keyword">Read</span> ahead sectors     auto<br>  - currently <span class="hljs-keyword">set</span> to     256<br>  Block device           253:4<br></code></pre>

<p><strong>b. 挂载快照卷</strong> <br>
挂载扩展卷然后查看快照卷与原卷的数据关联关系</p>



<pre class="prettyprint hljs-dark"><code class="hljs autoit"><span class="hljs-meta">#原逻辑卷中与块照卷好像都有相同的数据，其实这只是一种关联关系而已</span><br>[root<span class="hljs-symbol">@z10</span> lv0]<span class="hljs-meta"># ls /mnt/lv0/</span><br>hello.txt  passwd<br><br>[root<span class="hljs-symbol">@z10</span> lv0]<span class="hljs-meta"># mount -o ro /dev/newvg/snap_lv0 /mnt/snap_lv0/</span><br>[root<span class="hljs-symbol">@z10</span> lv0]<span class="hljs-meta"># ls /mnt/snap_lv0/</span><br>hello.txt  passwd<br></code></pre>

<p><strong>恢复快照卷</strong> <br>
我们将原卷中的数据删除，然后通过快照卷将其恢复</p>

<p>删除原逻辑卷中的数据</p>



<pre class="prettyprint hljs-dark"><code class="hljs autoit">[root<span class="hljs-symbol">@z10</span> lv0]<span class="hljs-meta"># rm ./* -rf</span><br>[root<span class="hljs-symbol">@z10</span> lv0]<span class="hljs-meta"># ls</span><br>[root<span class="hljs-symbol">@z10</span> lv0]<span class="hljs-meta"># </span><br></code></pre>

<p>快照卷中此时已将数据备份到自己空间下</p>



<pre class="prettyprint hljs-dark"><code class="hljs autoit">[root<span class="hljs-symbol">@z10</span> lv0]<span class="hljs-meta"># ls /mnt/snap_lv0/</span><br>hello.txt  passwd<br></code></pre>

<p>恢复逻辑卷中的数据, 恢复之前必须把原卷和快照卷卸载，方可操作</p>

<pre class="prettyprint hljs-dark"><code class="hljs dockerfile"><span class="hljs-comment"># 卸载快照卷和原逻辑卷</span><br>[root@z10 mnt]<span class="hljs-comment"># umount /mnt/{snap_lv0,lv0}</span><br><br><span class="hljs-comment"># 恢复原卷中的数据</span><br>[root@z10 mnt]<span class="hljs-comment"># lvconvert --merge /dev/newvg/snap_lv0 </span><br>  Merging of <span class="hljs-keyword">volume</span><span class="bash"> snap_lv0 started.<br></span>  lv0: Merged: <span class="hljs-number">100.0</span>%<br>  Merge of snapshot into logical <span class="hljs-keyword">volume</span><span class="bash"> lv0 has finished.<br></span>  Logical <span class="hljs-keyword">volume</span><span class="bash"> <span class="hljs-string">"snap_lv0"</span> successfully removed<br></span><br><span class="hljs-comment"># 重新挂载，观察数据是否恢复</span><br>[root@z10 mnt]<span class="hljs-comment"># mount /dev/newvg/lv0 /mnt/lv0/</span><br>[root@z10 mnt]<span class="hljs-comment"># ls /mnt/lv0/</span><br>hello.txt  passwd   &lt;=成功恢复<br></code></pre>

<p>此时快照卷在恢复的时候已被删除，若未删除可以通过以下命令将其删除 <br>
<code>lvremove /dev/vg_name/snap_name</code></p></div></body></html>